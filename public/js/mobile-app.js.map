{"version":3,"sources":["../../client/mobile-app.js"],"names":[],"mappings":"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","file":"mobile-app.js","sourcesContent":["/**\n * @file\n * @author Alejandro Rivera <seeealejandro@gmail.com>\n * {@link https://github.com/alejandro-rivera-y/beta-ball GitHub}\n */\n\n\noptionsPicker.addEventListener('submit', sendBasicOptions);\n\nsocket.on('joined', userJoined => {\n  if (mobile && !user.id) {\n    user = userJoined;\n    renderColors();\n    fillBasicOptions();\n  }\n});\n\nsocket.on('basicOptions', data => {\n  if (data.id === user.id) {\n    colors[data.color].disabled = true\n    renderColors()\n    readyContainer()\n  }\n});\n\nsocket.on('notification', data => {\n  if (data.id === user.id) {\n    renderNotification(data)\n  } else if (data.all) {\n    renderNotification(data)\n  }\n});\n\nsocket.on('start', users => {\n  if (mobile) {\n    optionsPicker.classList.add('hidden');\n    readyWindow.classList.add('hidden');\n    move.classList.remove('hidden');\n    eventListenerOnBetaBalls()\n  }\n});\n\nsocket.on('screen winner', winner => {\n  if (mobile && winner.id !== user.id) {\n    looserWindow()\n  } else if (mobile) {\n    winnerWindow(winner)\n  }\n});\n\nfunction sendBasicOptions(event) {\n  event.preventDefault();\n  betaBall.name = this.elements.name.value;\n  betaBall.color = this.elements.color.value;\n  if (betaBall.name && betaBall.color) {\n    socket.emit('newOptions', betaBall)\n  } else {\n    alert('El nombre y el color son obligatorios')\n  }\n}\n\nfunction renderColors(htmlElement) {\n  // TODO Verificar que el color no se repita\n  colorContainer.innerHTML = '';\n  for (let index in colors) {\n    colorContainer.innerHTML +=\n      `\n<label class=\"color-picker ${colors[index].disabled && betaBall.color !== colors[index] ? 'disabled' : ''}\" style=\"background-color: ${index}\">\n    <input type=\"radio\" \n        ${colors[index].disabled && betaBall.color !== colors[index] ? 'disabled' : ''} \n        ${betaBall.color === colors[index] ? 'checked' : ''} \n      name=\"color\" value=\"${index}\">\n</label>`\n  }\n}\n\nfunction eventListenerOnBetaBalls() {\n  let internalCounter = 0;\n  let READY_ON_TOP = false;\n  let READY_ON_BOTTOM = true;\n  let END_MOVE = 90; // De un angulo de 90 grados ha alcanzado el maximo\n  let BEGIN_MOVE = 0; // Comienzo del movimiento de 90 grados\n\n  renderMeeter(meeter);\n\n  function handleOrientation(event) {\n    let beta = event.beta;\n    if (beta > END_MOVE && READY_ON_BOTTOM) {\n      READY_ON_TOP = true;\n      READY_ON_BOTTOM = false\n    }\n    if (beta < BEGIN_MOVE && READY_ON_TOP) {\n      READY_ON_TOP = false;\n      READY_ON_BOTTOM = true;\n      internalCounter++;\n      socket.emit('user move', true);\n      window.navigator.vibrate([100, 30])\n    }\n  }\n\n  window.addEventListener('deviceorientation', handleOrientation);\n\n  move.addEventListener('click', function () {\n    socket.emit('user move', true);\n  })\n\n}\n\nfunction fillBasicOptions() {\n  // TODO Buscar en las cookies\n  // TODO Llenar toda la informaciÃ³n\n  // TODO almacenarlo en cookies\n  optionsPicker.classList.remove('hidden');\n  contenido.classList.add('hidden');\n}\n\nfunction readyContainer() {\n  readyWindow.classList.remove('hidden')\n}\n\nfunction renderMeeter() {\n  // TODO renderizar el medidor de velocidad\n}"]}